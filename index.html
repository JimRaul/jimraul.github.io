<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Retro Snake - Terminal Edition</title>
<style>
  body {
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: 'Courier New', Courier, monospace;
    color: #00ff41;
  }

  .game-container {
    border: 3px double #00ff41;
    padding: 15px;
    background: rgba(0, 10, 0, 0.9);
    box-shadow: 0 0 20px #00ff41;
    text-align: center;
  }

  #game-canvas {
    white-space: pre;
    line-height: 1;
    font-size: 16px;
    text-shadow: 0 0 5px #00ff41;
    margin: 10px 0;
  }

  .stats {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    border-bottom: 1px solid #00ff41;
    padding-bottom: 5px;
  }
</style>
</head>
<body>

<div class="game-container">
  <div class="stats">
    <span>SNAKE_OS v1.0</span>
    <span id="score">SCORE: 000</span>
  </div>
  
  <pre id="game-canvas"></pre>

  <div id="msg">USE AS SETAS DO TECLADO</div>
</div>

<script>
  const canvas = document.getElementById('game-canvas');
  const scoreEl = document.getElementById('score');
  
  const WIDTH = 30;  // Largura em caracteres
  const HEIGHT = 20; // Altura em linhas
  
  let snake = [{x: 10, y: 10}, {x: 10, y: 11}, {x: 10, y: 12}];
  let food = {x: 5, y: 5};
  let dx = 0; // Direção X
  let dy = -1; // Direção Y (começa subindo)
  let score = 0;
  let gameSpeed = 100;

  function draw() {
    let board = [];
    
    // Criar o tabuleiro vazio com moldura
    for (let y = 0; y < HEIGHT; y++) {
      let row = [];
      for (let x = 0; x < WIDTH; x++) {
        if (x === 0 || x === WIDTH - 1 || y === 0 || y === HEIGHT - 1) {
          row.push('#'); // Paredes
        } else {
          row.push(' ');
        }
      }
      board.push(row);
    }

    // Desenhar Comida
    board[food.y][food.x] = 'X';

    // Desenhar Cobra
    snake.forEach((part, index) => {
      if (index === 0) {
        board[part.y][part.x] = '@'; // Cabeça
      } else {
        board[part.y][part.x] = 'o'; // Corpo
      }
    });

    // Renderizar no HTML
    canvas.textContent = board.map(row => row.join('')).join('\n');
  }

  function move() {
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};

    // Checar colisão com paredes ou corpo
    if (head.x <= 0 || head.x >= WIDTH - 1 || head.y <= 0 || head.y >= HEIGHT - 1 || 
        snake.some(part => part.x === head.x && part.y === head.y)) {
      alert("GAME OVER! SCORE: " + score);
      resetGame();
      return;
    }

    snake.unshift(head);

    // Checar se comeu a comida
    if (head.x === food.x && head.y === food.y) {
      score += 10;
      scoreEl.textContent = `SCORE: ${score.toString().padStart(3, '0')}`;
      generateFood();
    } else {
      snake.pop();
    }
  }

  function generateFood() {
    food = {
      x: Math.floor(Math.random() * (WIDTH - 2)) + 1,
      y: Math.floor(Math.random() * (HEIGHT - 2)) + 1
    };
    // Impedir comida de nascer em cima da cobra
    if (snake.some(part => part.x === food.x && part.y === food.y)) generateFood();
  }

  function resetGame() {
    snake = [{x: 10, y: 10}, {x: 10, y: 11}, {x: 10, y: 12}];
    dx = 0; dy = -1;
    score = 0;
    scoreEl.textContent = "SCORE: 000";
    generateFood();
  }

  // Controles
  window.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowUp':    if (dy === 0) { dx = 0; dy = -1; } break;
      case 'ArrowDown':  if (dy === 0) { dx = 0; dy = 1; } break;
      case 'ArrowLeft':  if (dx === 0) { dx = -1; dy = 0; } break;
      case 'ArrowRight': if (dx === 0) { dx = 1; dy = 0; } break;
    }
  });

  function gameLoop() {
    move();
    draw();
    setTimeout(gameLoop, gameSpeed);
  }

  generateFood();
  gameLoop();
</script>

</body>
</html>
